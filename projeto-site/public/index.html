<!DOCTYPE html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>New Horizon</title>
	<link href="http://fonts.googleapis.com/css?family=Didact+Gothic" rel="stylesheet" />
	<link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
	<link href="css/fonts.css" rel="stylesheet" type="text/css" media="all" />
	<!-- <script src="../routes/usuarios.js"></script> -->

</head>

<body>
	<div id="divCabecalho" style="background: #111111 url(images/pic01.png) no-repeat center;">
		<div id="cabecalho" class="container">
			<div id="logo">
				<h1><a href="index.html">New Horizon</a></h1>
			</div>
			<div id="menu">
				<ul>
					<li class="active"><a href="index.html" accesskey="1" title="">Home</a></li>
					<li><a href="sobrenos.html" accesskey="2" title="">Sobre Nós</a></li>
					<li><a href="dicas.html" accesskey="3" title="">Dicas</a><br></li>
					<li><a href="depoimentos.html" accesskey="4" title="">Depoimentos</a></li>
					<li><a href="login.html" accesskey="5" title="">Admin</a></li>
				</ul>
			</div>
		</div>

		<div id="banner-wrapper">
			<div id="banner" class="container">
				<div class="title">
					<span class="byline">Dicas para planejar sua próxima aventura</span>
				</div>

			</div>
		</div>
	</div>

	<div id="divCaixas">
		<div id="tresColunas" class="container">

			<div class="title">
				<h2>Dicas</h2>
				<span class="byline">Viaje com tranquilidade</span>
			</div>
			<div class="caixaA">
				<p>Não importa de quanto tempo você dispõe, se fazer intercâmbio está na suas prioridades, ainda dá
					tempo. Além de programas mais longos, de seis meses em diante, hoje o mercado oferece cursos
					intensivos que duram a partir de duas semanas, para caber nas férias até dos executivos mais
					ocupados.</p>
			</div>
			<div class="caixaB">
				<p>Na hora de planejar um intercâmbio, antes mesmo de considerar suas opções é importante ser honesto. É
					importante ter bem claro que tipo de experiência você busca.</p>
				<a href="dicas.html" class="button button-alt">Mais Dicas</a>
			</div>
			<div class="caixaC">
				<p>Qual o objetivo do intercâmbio?, É a primeira pergunta que quem quer planejar um intercâmbio deve se
					fazer. Hoje, as opções de cursos são as mais variadas. As agências especializadas oferecem cursos de
					idioma, técnico, de pós-graduação, arte, culinária, maquiagem e cinema.</p>
			</div>
		</div>
	</div>

	<div id="quemSomos">
		<div class="container">
			<div class="title">
				<h2>QUEM SOMOS E O QUE FAZEMOS</h2>
				<br><br>
				<span class="byline">Todos têm diferentes abordagens e prioridades quando se trata de planejar um
					intercâmbio. Os membros
					da equipe da NewHorizon são amantes dessa forma de trocar culturas, o que nos permite ajudar nossos
					leitores a cobrir todas as suas necessidades. Conosco, todo o processo de tirar suas dúvidas é muito
					mais fácil e agradável.</span>
			</div>
			<ul class="actions">
				<li><a href="sobrenos.html" class="button">Saiba Mais</a></li>
			</ul>
		</div>
	</div>

	<div id="contato" style="text-align: center;">
		<div class="container">
			<p>Tenha acesso à conteudos exclusivos</p>
			<h2>Cadastre-se</h2><br>

			<form id="formContato">
				<input type="text" id="nome" name="nome" placeholder="Nome" style="width: 50%;" class="input">
				<br> <br>
				<input type="email" id="email" name="email" placeholder="Email" style="width: 50%;" class="input">
				<br> <br>

				<div>
					<p class="special"><b>Selecione as categorias que você deseja receber no seu email</b></p>
					<input type="checkbox" id="viagem" value="viagem">
					<label for="viagem">Dicas de Viagem</label>
					<br>
					<input type="checkbox" id="documentacao" value="documentacao">
					<label for="documentacao">Dicas sobre documentação</label>
					<br>
					<input type="checkbox" id="agencia" value="agencia">
					<label for="agencia">Dicas de Agência</label>
					<br>
					<input type="checkbox" id="todas" value="todas" checked>
					<label for="todas">Todas as categorias</label>
					<br><br>
				</div>

				<div>
					<p class="special"><b>Para onde você tem o desejo de ir?</b></p>
					<input type="radio" id="americaNorte" name="btnRadio" value="americaNorte">
					<label for="eua">América do Norte</label>
					<br>
					<input type="radio" id="americaCentral" name="btnRadio" value="americaCentral">
					<label for="eua">América Central</label>
					<br>
					<input type="radio" id="europa" name="btnRadio" value="europa">
					<label for="europa">Europa</label>
					<br>
					<input type="radio" id="oceania" name="btnRadio" value="oceania">
					<label for="oceania">Oceania</label>
					<br>
					<input type="radio" id="americaSul" name="btnRadio" value="americaSul">
					<label for="americaSul">América do Sul</label>
					<br>
					<input type="radio" id="africa" name="btnRadio" value="africa">
					<label for="africa">África</label>
					<br>
					<input type="radio" id="asia" name="btnRadio" value="asia">
					<label for="asia">Ásia</label>
					<br>
				</div>
			</div>

				<br>

				<ul id="mensagemErro">

				</ul>

				<br>

				<input type="submit" value="Enviar" class="button button-alt">
				<button class="button button-alt" onclick="apagar()">Apagar</button>

		</div>
		</form>
		</section>
	</div>

	<div id="direitoAutoral" class="container">
		<p>&copy; Giovanna Paniguel - Projeto Individual</p>
	</div>

</body>

</html>
<script>

	var list = document.getElementById('mensagemErro');
	var form = document.getElementById("formContato");

	function handleForm(event) {

		event.preventDefault();
		enviaContatoProBanco();
	}

	form.addEventListener('submit', handleForm);

	function enviaContatoProBanco() {

		var formulario = new URLSearchParams(new FormData(formContato));
		var erros = validaContato();
		mensagemErro.innerHTML = "";

		if (erros.length > 0) {
			for (var i = 0; i < erros.length; i++) {
				var erro = erros[i];

				var entry = document.createElement('li');
				entry.appendChild(document.createTextNode(erro));
				list.appendChild(entry);
				// mensagemErro.appendChild(`<li>${erro}</li>`);
			}
		} else {
			var destinoValue = '';
			var preferenciaValue = '';

			if (document.getElementById("viagem").checked) {
				preferenciaValue = document.getElementById("viagem").value;
			}
			else if (document.getElementById("documentacao").checked) {
				preferenciaValue = document.getElementById("documentacao").value;
			}
			else if (document.getElementById("agencia").checked) {
				preferenciaValue = document.getElementById("agencia").value;
			}
			else if (document.getElementById("todas").checked) {
				preferenciaValue = document.getElementById("todas").value;
			}

			destinoValue = document.querySelector('input[name="btnRadio"]:checked').value;

			fetch("/usuarios/cadastrar", {
				method: "POST",
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify({
					nome: nome.value,
					email: email.value,
					destino: destinoValue,
					preferencia: preferenciaValue
				})
			}).then(function (response) {

				console.log(response);

				if (response.ok) {

					alert(`Cadastro realizado com sucesso! Logo você receberá nossas dicas em seu email!`);

				}
			}
			)
		}
	}

	function validaContato() {
		var erros = [];

		if (!nome.value) {
			erros.push("Prencher nome!");
		}

		if (!email.value ||
			(email.value.search("@") == -1) ||
			(email.value.search(".") == -1) ||
			(email.value.search(" ") >= '')) {
			erros.push("O formato do email é: usuario@dominio.com");
		}

		return erros;
	}

	function apagar(){
		document.getElementById("formContato").reset();
	}

</script>