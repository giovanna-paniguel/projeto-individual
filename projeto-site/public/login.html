<!DOCTYPE html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>New Horizon</title>
    <link href="http://fonts.googleapis.com/css?family=Didact+Gothic" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
    <link href="../css/fonts.css" rel="stylesheet" type="text/css" media="all" />
</head>

<body>
    <div id="divCabecalho" style="background: #111111 url(images/pic01.png) no-repeat center;">
        <div id="cabecalho" class="container">
            <div id="logo">
                <h1><a href="index.html">New Horizon</a></h1>
            </div>
            <div id="menu">
                <ul>
                    <li><a href="index.html" accesskey="1" title="">Home</a></li>
                    <li><a href="sobrenos.html" accesskey="2" title="">Sobre NÃ³s</a></li>
                    <li><a href="dicas.html" accesskey="3" title="">Dicas</a><br></li>
                    <li><a href="depoimentos.html" accesskey="4" title="">Depoimentos</a></li>
                    <li class="active"><a href="login.html" accesskey="5" title="">Admin</a></li>
                </ul>
            </div>
        </div>
        <div id="banner-wrapper">
            <div id="banner" class="container">
                <div class="title">
                    <span class="byline">Dashboard</span>
                </div>

            </div>
        </div>
    </div>

    <div class="divBranca" style="text-align: center;">
        <h1>Bem-Vindo!</h1> <br><br>
        <form id="form_login" method="post" onsubmit="return entrar()">
            <input type="text" name="login" class="input" placeholder="Login">
            <br><br>
            <input type="password" name="senha" class="input" placeholder="Senha">
            <br>
            <button type="submit" id="btn_entrar" class="button button-alt">Entrar</button>
        </form>

        <div id="div_erro"></div>

    </div>

    <div id="direitoAutoral" class="container">
		<p>&copy; Giovanna Paniguel - Projeto Individual</p>
	</div>
</body>

</html>

<script>

    function entrar() {
        var formulario = new URLSearchParams(new FormData(form_login));
        fetch("/usuarios/autenticar", {
            method: "POST",
            body: formulario
        }).then(resposta => {

            if (resposta.ok) {

                resposta.json().then(json => {

                    sessionStorage.login_usuario_meuapp = json.email;
                    sessionStorage.nome_usuario_meuapp = json.nome;

                    window.location.href = 'dashboard.html';
                });

            } else {

                console.log('Erro de login!');

                response.text().then(texto => {
                    console.error(texto);
                });
            }
        });

        return false;
    }

</script>